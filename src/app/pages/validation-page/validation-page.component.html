<div class="receipt-page">
  @if (isLoading) {
    <div class="loading-container">
      <div class="spinner-large"></div>
      <p>Chargement du reçu...</p>
    </div>
  } @else if (order) {
    <div class="receipt-container">
      <div class="receipt-content" id="receipt">
        <div class="receipt-header">
          <div class="success-icon">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
              <polyline points="22 4 12 14.01 9 11.01"/>
            </svg>
          </div>
          <h1>Paiement confirmé !</h1>
          <p class="subtitle">Votre commande a été enregistrée avec succès</p>
        </div>

        <div class="receipt-body">
          <div class="receipt-section">
            <h2>Détails de la commande</h2>
            <div class="info-grid">
              <div class="info-item">
                <span class="label">N° de commande</span>
                <span class="value order-number">{{ order.order_number }}</span>
              </div>
              <div class="info-item">
                <span class="label">Date</span>
                <span class="value">{{ formatDate(order.created_at) }}</span>
              </div>
              <div class="info-item">
                <span class="label">Type</span>
                <span class="value">{{ getOrderTypeLabel(order.order_type) }}</span>
              </div>
              <div class="info-item">
                <span class="label">Paiement</span>
                <span class="value">{{ order.payment_method || 'Non spécifié' }}</span>
              </div>
            </div>
          </div>

          <div class="receipt-section">
            <h2>Articles commandés</h2>
            <div class="items-list">
              @for (item of order.items; track $index) {
                <div class="receipt-item">
                  <img [src]="item.imageUrl" [alt]="item.title" class="item-image">
                  <div class="item-details">
                    <h3>{{ item.title }}</h3>
                    <p>{{ item.description }}</p>
                  </div>
                  <div class="item-price">
                    {{ item.price | price }}
                  </div>
                </div>
              }
            </div>
          </div>

          <div class="receipt-section">
            <div class="total-section">
              <span class="total-label">Total</span>
              <span class="total-amount">{{ order.total_price | price }}</span>
            </div>
          </div>

          <div class="receipt-footer">
            <p class="thank-you">Merci pour votre commande !</p>
            <p class="footer-note">Présentez ce reçu lors du retrait de votre commande</p>
          </div>
        </div>
      </div>

      <div class="receipt-actions no-print">
        <button class="btn-secondary" (click)="goHome()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
            <polyline points="9 22 9 12 15 12 15 22"/>
          </svg>
          Retour à l'accueil
        </button>
        <button class="btn-primary" (click)="printReceipt()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="6 9 6 2 18 2 18 9"/>
            <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/>
            <rect x="6" y="14" width="12" height="8"/>
          </svg>
          Imprimer le reçu
        </button>
      </div>
    </div>
  } @else {
    <div class="error-container">
      <p>Commande introuvable</p>
      <button class="btn-primary" (click)="goHome()">Retour à l'accueil</button>
    </div>
  }
</div>
